(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1121:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"p",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"j",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"h",(function(){return u})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return d})),n.d(e,"o",(function(){return l})),n.d(e,"w",(function(){return m})),n.d(e,"r",(function(){return f})),n.d(e,"a",(function(){return h})),n.d(e,"g",(function(){return g})),n.d(e,"s",(function(){return v})),n.d(e,"t",(function(){return _})),n.d(e,"v",(function(){return w})),n.d(e,"n",(function(){return C})),n.d(e,"u",(function(){return b})),n.d(e,"z",(function(){return k})),n.d(e,"y",(function(){return y})),n.d(e,"m",(function(){return $})),n.d(e,"e",(function(){return O})),n.d(e,"q",(function(){return D})),n.d(e,"f",(function(){return x})),n.d(e,"i",(function(){return j})),n.d(e,"x",(function(){return I}));var a=n(15),r=function(t){return a.a.get("/frontend/column/detail",{params:t})},s=function(t){return a.a.get("/frontend/column/tag",{params:t})},o=function(t){return a.a.post("/frontend/column/attention",t)},i=function(t){return a.a.get("/frontend/column/list",{params:t})},c=function(t){return a.a.get("/frontend/column/comment",{params:t})},u=function(t){return a.a.get("/frontend/column/hotComment",{params:t})},p=function(t){return a.a.get("/frontend/column/postList",{params:t})},d=function(t){return a.a.get("/frontend/column/searchPost",{params:t})},l=function(t){return a.a.post("/frontend/column/submit",t)},m=function(t){return a.a.post("/frontend/column/unsubscribe",t)},f=function(t){return a.a.post("/frontend/column/attention",t)},h=function(t){return a.a.get("/frontend/column/admin",{params:t})},g=function(t){return a.a.post("/frontend/column/exitManage",t)},v=function(t){return a.a.post("/frontend/column/cancel",t)},_=function(t){return a.a.post("/frontend/column/collect",t)},w=function(t){return a.a.post("/frontend/column/remove",t)},C=function(t){return a.a.get("/frontend/column/searchUser",{params:t})},b=function(t){return a.a.post("/frontend/column/create",t)},k=function(t){return a.a.get("/frontend/column/columnList",{params:t})},y=function(t){return a.a.post("/frontend/upload/image",t)},$=function(t){return a.a.get("/frontend/column/searchTag",{params:t})},O=function(t){return a.a.post("/frontend/column/discuss",t)},D=function(t){return a.a.post("/frontend/column/update",t)},x=function(t){return a.a.get("/frontend/column/editDetail",{params:t})},j=function(t){return a.a.get("/frontend/column/isFollow",{params:t})},I=function(t){return a.a.post("/frontend/post/delComment",t)}},1122:function(t,e,n){"use strict";n.d(e,"k",(function(){return r})),n.d(e,"m",(function(){return s})),n.d(e,"j",(function(){return o})),n.d(e,"l",(function(){return i})),n.d(e,"v",(function(){return c})),n.d(e,"w",(function(){return u})),n.d(e,"y",(function(){return p})),n.d(e,"g",(function(){return d})),n.d(e,"t",(function(){return l})),n.d(e,"r",(function(){return m})),n.d(e,"i",(function(){return f})),n.d(e,"x",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"h",(function(){return v})),n.d(e,"e",(function(){return _})),n.d(e,"c",(function(){return w})),n.d(e,"u",(function(){return C})),n.d(e,"s",(function(){return b})),n.d(e,"a",(function(){return k})),n.d(e,"q",(function(){return y})),n.d(e,"p",(function(){return $})),n.d(e,"d",(function(){return O})),n.d(e,"o",(function(){return D})),n.d(e,"n",(function(){return x})),n.d(e,"f",(function(){return j}));var a=n(15),r=function(t){return a.a.get("/frontend/post/detail",{params:t,cache:!0})},s=function(t){return a.a.get("/frontend/post/info",{params:t,cache:!0})},o=function(t){return a.a.get("/frontend/post/ad",{params:t,cache:!0})},i=function(t){return a.a.get("/frontend/post/comments",{params:t})},c=function(t){return a.a.post("/frontend/post/like",t)},u=function(t){return a.a.post("/frontend/comment/like",t)},p=function(t){return a.a.post("/frontend/post/discuss",t)},d=function(t){return a.a.post("/frontend/report",t)},l=function(t){return a.a.post("/frontend/resume",t)},m=function(t){return a.a.get("/frontend/post/recommend",{params:t})},f=function(t){return a.a.post("/frontend/user/follow",t)},h=function(t){return a.a.post("/frontend/reward/order",t)},g=function(t){return a.a.get("/frontend/reward/status",{params:t})},v=function(t){return a.a.post("/frontend/post/favorite",t)},_=function(t){return a.a.get("/frontend/column/columnList",{params:t})},w=function(t){return a.a.post("/frontend/column/collect",t)},C=function(t){return a.a.post("/frontend/column/submit",t)},b=function(t){return a.a.post("/frontend/column/remove",t)},k=function(t){return a.a.post("/frontend/column/cancel",t)},y=function(t){return a.a.get("/frontend/column/postIncludeColumn",{params:t})},$=function(t){return a.a.get("/frontend/column/postAdminColumn",{params:t})},O=function(t){return a.a.post("/frontend/column/like",t)},D=function(t){return a.a.post("/frontend/readOrder/create",t)},x=function(t){return a.a.get("/frontend/readOrder/detail",{params:t})},j=function(t){return a.a.post("/frontend/post/delComment",t)}},1158:function(t,e,n){},1159:function(t,e,n){},1160:function(t,e,n){},1225:function(t,e,n){"use strict";n(590);var a=n(1121),r={props:{propdata:{type:Object,default:function(){return{}}},type:{type:Number,default:1},nickname:{type:String,default:""}},data:function(){return{defaultImg:"https://image.3001.net/images/index/wp-user-avatar-50x50.png",isMail:!0,message:"",is_anonymous:!1}},computed:{userInfo:function(){return this.$store.state.userInfo.userInfo}},watch:{userInfoData:{handler:function(t,e){},deep:!0,immediate:!0}},created:function(){this.message="".concat(this.nickname," ").concat(this.message)},methods:{onAnonymousChange:function(t){this.is_anonymous=t.target.checked},changeCheckbox:function(t){this.isMail=t.target.checked},sendFace:function(){alert("暂未添加表情功能")},sendPicture:function(t){var e=this,n=t.target.files.length>0?t.target.files[0]:null;if(!n)return!1;var r=new FormData;r.append("file",n),r.append("is_base64",0),Object(a.y)(r).then((function(n){n.data&&(e.message+="[img]".concat(n.data.url,"[/img]"),t.target.value="")})).catch((function(t){e.$message.error(t.msg)}))},sendInfo:function(){if(""===this.message||!this.message.trim()||"&nbsp;"===this.message)return this.$message.error("请至少写句话吧~"),!1;this.$emit("triggerAnwser",{content:this.message.trim(),notice:this.isMail?1:0,is_anonymous:this.is_anonymous?1:0})},cancel:function(){this.message="",this.$parent.anwserChat="",this.$parent.parentId="0",this.$parent.inputRegion=!1},bindUserPhone:function(){this.$emit("showPhonePanel",!0)},loginAction:function(t){window.location.href=t?this.globalConfig.hostName+"/oauth":"https://account.tophant.com/register.html"}}},s=(n(1251),n(17)),o=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-item"},[n("div",{staticClass:"avatar"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.userInfo.user_pic?t.userInfo.user_pic:t.defaultImg}})])]),t._v(" "),t.userInfo.username&&t.userInfo.phone?n("div",{staticClass:"content"},[n("div",{staticClass:"text-area"},[n("a-textarea",{attrs:{"max-length":500,placeholder:"请输入您的评论...","auto-size":{minRows:3,maxRows:5}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),t._v(" "),n("div",{staticClass:"comment-status"},[n("span",{staticClass:"remind"},[n("a-checkbox",{attrs:{checked:t.isMail},on:{change:t.changeCheckbox}},[t._v("\n          有人回复时邮件通知我\n        ")])],1),t._v(" "),n("span",{staticClass:"handler"},[n("span",{staticClass:"picture"},[n("span",{staticClass:"box"},[n("a-icon",{attrs:{type:"picture"}}),t._v(" "),n("input",{staticClass:"input-btn",attrs:{title:"上传图片",type:"file",value:"",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:function(e){return t.sendPicture(e)}}})],1)]),t._v(" "),n("a-checkbox",{attrs:{checked:t.is_anonymous},on:{change:t.onAnonymousChange}},[t._v("\n          匿名\n        ")]),t._v(" "),n("span",{staticClass:"send",on:{click:t.sendInfo}},[t._v("发表")]),t._v(" "),2!=t.type?n("span",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消")]):t._e()],1)])]):t.userInfo.username&&!t.userInfo.phone?n("div",{staticClass:"content nophone"},[n("p",[t._v("根据相关政策法规，请"),n("span",{on:{click:t.bindUserPhone}},[t._v("绑定手机号")]),t._v("后在FreeBuf发布内容哦～")])]):n("div",{staticClass:"content nologin"},[n("p",[t._v("请"),n("span",{on:{click:function(e){return t.loginAction(1)}}},[t._v("登录")]),t._v("/"),n("span",{on:{click:function(e){return t.loginAction(0)}}},[t._v("注册")]),t._v("后在FreeBuf发布内容哦")])])])}),[],!1,null,"556bda86",null);e.a=o.exports},1241:function(t,e,n){"use strict";n(261),n(78),n(57),n(38),n(121),n(52);var a=n(22),r=n(122),s=n(1122);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var i={props:{types:{type:String,default:""},authorname:{type:String,default:""},itemdata:{type:Object,default:function(){return{}}}},data:function(){return{dropdownStatus:!1,isShowReport:!1,reportInfo:["广告等垃圾信息","不友善内容","违反法律法规的内容","不宜公开讨论的政治内容","其他"],parentdata:{}}},computed:{userInfoData:function(){return this.$store.state.userInfo.userInfo},postUserName:function(){return this.authorname}},watch:{userInfoData:{handler:function(t,e){},deep:!0,immediate:!0}},created:function(){this.parentdata=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.itemdata)},methods:{onvisibleChange:function(t){this.dropdownStatus=t},showReportOut:function(){this.isShowReport=!1},showReportOver:function(){this.isShowReport=!0},editComment:function(t){window.location.href="".concat(this.globalConfig.hostName,"/wp-admin/comment.php?action=editcomment&c=").concat(this.parentdata.id)},signComment:function(t){window.location.href="".concat(this.globalConfig.hostName,"/wp-admin/comment.php?action=cdc&dt=spam&c=").concat(this.parentdata.id)},deleteComment:function(t){var e=this;if(!this.isShowReport)return!1;this.$confirm({title:"确定要删除这条评论吗？",content:"",okText:"确定",cancelText:"取消",onOk:function(){return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.f)({id:e.parentdata.id}).then((function(){e.$message.success("评论已移入回收站!"),e.$parent.itemData.child.forEach((function(t,n){t.id===e.parentdata.id&&e.$parent.itemData.child.splice(n,1)}))}));case 2:case"end":return t.stop()}}),t)})))()},onCancel:function(){}})},jumpToPersonal:function(t){if(t||t.length>0){var e="".concat(this.globalConfig.hostName,"/author/").concat(this.parentdata.username);window.open(e,"_blank")}},onReportClick:function(t,e){var n=this;return Object(a.a)(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=11;break}if(r={id:n.parentdata.id,type:2,reason:e},"column"!==n.types){a.next=7;break}return a.next=5,Object(s.d)(r).then((function(t){200===t.code&&(n.$message.success("举报成功!"),n.$set(n.parentdata,"report_status",!0))})).catch((function(t){n.$message.error(t.msg)}));case 5:a.next=9;break;case 7:return a.next=9,Object(s.w)(r).then((function(t){200===t.code&&(n.$message.success("举报成功!"),n.$set(n.parentdata,"report_status",!0))})).catch((function(t){n.$message.error(t.msg)}));case 9:a.next=12;break;case 11:n.$message.success("您已举报过该评论，请勿重复操作!");case 12:case"end":return a.stop()}}),a)})))()},approveAction:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.like_status?2:1,r={id:t.id,type:1,status:a},"column"!==e.types){n.next=7;break}return n.next=5,Object(s.d)(r).then((function(n){if(200===n.code)if(t.like_status){e.$message.success("取消点赞！");var a=parseInt(t.agree)-1;e.$set(t,"agree",a),e.$set(t,"like_status",!1)}else{e.$message.success("点赞成功！");var r=parseInt(t.agree)+1;e.$set(t,"agree",r),e.$set(t,"like_status",!0)}})).catch((function(t){e.$message.error(t.msg)}));case 5:n.next=9;break;case 7:return n.next=9,Object(s.w)(r).then((function(n){if(200===n.code)if(2===a){e.$message.success("取消点赞！");var r=parseInt(t.agree)-1;e.$set(e.parentdata,"agree",r),e.$set(e.parentdata,"like_status",!1)}else{e.$message.success("点赞成功！");var s=parseInt(t.agree)+1;e.$set(e.parentdata,"agree",s),e.$set(e.parentdata,"like_status",!0)}})).catch((function(t){e.$message.error(t.msg)}));case 9:case"end":return n.stop()}}),n)})))()},anwserAction:function(){this.$parent.inputRegion=!0,this.$emit("hideSiblingPanel",this.$parent.itemData.id),this.$parent.inputRegion&&(this.$parent.anwserChat="child",this.$parent.parentId=this.parentdata.id,this.$parent.responseName="@"+this.parentdata.nickname)}}},c=(n(1250),n(17)),u=Object(c.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-item",on:{mouseover:function(e){return t.showReportOver(!0)},mouseout:function(e){return t.showReportOut(!1)}}},[a("div",{staticClass:"avatar"},[a("div",{staticClass:"img",style:{cursor:t.parentdata.is_wb||t.parentdata.is_anonymous?"initial":""},on:{click:function(e){return t.jumpToPersonal(t.parentdata.user_url)}}},[a("img",{staticStyle:{color:"#fff"},attrs:{src:t.parentdata.user_pic,alt:t.parentdata.username}})])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"user-info"},[a("span",{staticClass:"name",style:{cursor:t.parentdata.is_wb||t.parentdata.is_anonymous?"initial":""},on:{click:function(e){return t.jumpToPersonal(t.parentdata.user_url)}}},[t._v(t._s(t.parentdata.nickname))]),t._v(" "),t.postUserName==t.parentdata.username&&"column"!==t.types?a("span",{staticClass:"is_author"},[t._v("作者")]):t._e(),t._v(" "),t.parentdata.vip?a("span",{staticClass:"is-vip"},[a("img",{attrs:{src:n(589)}})]):t._e(),t._v(" "),t.parentdata.user_level>0?a("span",{staticClass:"level"},[t._v("LV."+t._s(t.parentdata.user_level))]):t._e(),t._v(" "),t.parentdata.desc?a("span",{staticClass:"tag"},[a("i",[t._v("(")]),a("b",[t._v(t._s(t.parentdata.desc))]),a("i",[t._v(")")])]):t._e()]),t._v(" "),a("div",{staticClass:"context"},[a("span",{staticClass:"comment-txt",style:{color:"spam"===t.parentdata.approved?"rgba(0,0,0,.25)":""},domProps:{innerHTML:t._s(t.parentdata.content)}}),t._v(" "),a("span",{staticStyle:{fontStyle:"italic"}},[t._v(t._s(0==t.parentdata.approved?"（ 评论审核中，通过后自动发布~ ）":""))])]),t._v(" "),a("div",{staticClass:"comment-status"},[a("span",{staticClass:"date"},[t._v(t._s(t.parentdata.date))]),t._v(" "),1==t.parentdata.approved?a("span",{staticClass:"interaction"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"admin"==t.userInfoData.role&&t.isShowReport,expression:"userInfoData.role=='admin'&&isShowReport"}],staticClass:"admin-handler"},[a("span",{staticClass:"edit",on:{click:function(e){return t.editComment(t.parentdata)}}},[a("a-icon",{attrs:{type:"edit"}}),t._v("编辑")],1),t._v(" "),a("span",{staticClass:"sign",on:{click:function(e){return t.signComment(t.parentdata)}}},[a("a-icon",{attrs:{type:"dislike"}}),t._v("标为垃圾")],1),t._v(" "),a("span",{staticClass:"delete",on:{click:function(e){return t.deleteComment(t.parentdata)}}},[a("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)]),t._v(" "),t.parentdata.report_status?[a("a",{directives:[{name:"show",rawName:"v-show",value:t.isShowReport,expression:"isShowReport"}],staticClass:"ant-dropdown-link reported"},[a("a-icon",{attrs:{type:"info-circle"}}),t._v("已举报\n          ")],1)]:[a("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.isShowReport||t.dropdownStatus,expression:"isShowReport || dropdownStatus"}],on:{visibleChange:t.onvisibleChange}},[a("a",{staticClass:"ant-dropdown-link",class:t.parentdata.report_status?"reported":"",on:{click:function(t){return t.preventDefault()}}},[a("a-icon",{attrs:{type:"info-circle"}}),t._v(t._s(t.parentdata.report_status?"已举报":"举报")+"\n            ")],1),t._v(" "),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},t._l(t.reportInfo,(function(e){return a("a-menu-item",{key:e,on:{click:function(n){return t.onReportClick(t.parentdata.report_status,e)}}},[t._v("\n                "+t._s(e)+"\n              ")])})),1)],1)],t._v(" "),a("span",{staticClass:"approve",class:t.parentdata.like_status?"clicked":"",on:{click:function(e){return t.approveAction(t.parentdata)}}},[a("a-icon",{attrs:{type:"like"}}),t._v(t._s(t.parentdata.agree>0?t.parentdata.agree:"  "))],1),t._v(" "),a("span",{staticClass:"anwser",on:{click:function(e){return t.anwserAction(t.parentdata)}}},[a("a-icon",{attrs:{type:"message"}}),t._v("回复")],1)],2):t._e()])])])}),[],!1,null,"a0f1ef5c",null).exports,p=n(1225),d=n(1121);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var m={components:{ChildItem:u,InputItem:p.a},props:{columnid:{type:String,default:""},types:{type:String,default:""},parentdata:{type:Object,default:function(){return{}}},articalId:{type:String,default:""},postauthorname:{type:String,default:""}},data:function(){return{host_name:"https://www.freebuf.com",dropdownStatus:!1,itemData:{},isShowReport:!1,limitNum:5,isExpand:!1,isFocus:!1,responseName:"",anwserChat:"",parentId:"0",reportInfo:["广告等垃圾信息","不友善内容","违反法律法规的内容","不宜公开讨论的政治内容","其他"]}},computed:{userInfoData:function(){return this.$store.state.userInfo.userInfo},inputRegion:{get:function(){return this.parentdata.hideInput},set:function(t){this.parentdata.hideInput=t}},authorName:function(){return this.postauthorname}},watch:{userInfoData:{handler:function(t,e){},deep:!0,immediate:!0}},created:function(){this.itemData=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.parentdata)},methods:{onvisibleChange:function(t){this.dropdownStatus=t},showReport:function(t){this.isShowReport=t},editComment:function(t){window.location.href="".concat(this.host_name,"/wp-admin/comment.php?action=editcomment&c=").concat(this.parentdata.id)},signComment:function(t){window.location.href="".concat(this.host_name,"/wp-admin/comment.php?action=cdc&dt=spam&c=").concat(this.parentdata.id)},deleteComment:function(t){var e=this;this.$confirm({title:"确定要删除这条评论吗？",content:"",okText:"确定",cancelText:"取消",onOk:function(){return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.x)({id:e.parentdata.id}).then((function(){e.$message.success("评论已移入回收站!"),e.$parent.commentModule.data_list.forEach((function(t,n){t.id===e.parentdata.id&&e.$parent.commentModule.data_list.splice(n,1)}))}));case 2:case"end":return t.stop()}}),t)})))()},onCancel:function(){}})},jumpToPersonal:function(t){if(t||t.length>0){var e="".concat(this.globalConfig.hostName,"/author/").concat(this.parentdata.username);window.open(e,"_blank")}},approveAction:function(t){var e=this,n=t.like_status?2:1,a={id:t.id,type:1,status:n};"column"===this.types?Object(s.d)(a).then((function(n){if(200===n.code)if(t.like_status){e.$message.success("取消点赞！");var a=parseInt(t.agree)-1;e.$set(t,"agree",a),e.$set(t,"like_status",!1)}else{e.$message.success("点赞成功！");var r=parseInt(t.agree)+1;e.$set(t,"agree",r),e.$set(t,"like_status",!0)}})):Object(s.w)(a).then((function(n){if(200===n.code)if(t.like_status){e.$message.success("取消点赞！");var a=parseInt(t.agree)-1;e.$set(t,"agree",a),e.$set(t,"like_status",!1)}else{e.$message.success("点赞成功！");var r=parseInt(t.agree)+1;e.$set(t,"agree",r),e.$set(t,"like_status",!0)}}))},anwserAction:function(t){this.inputRegion=!0,this.$emit("hideSiblingPanel",t.id),this.inputRegion&&(this.anwserChat="child",this.parentId=this.itemData.id)},lookMore:function(t){this.isFocus||(this.isFocus=!0),this.isExpand=!this.isExpand},onReportClick:function(t,e){var n=this;return Object(a.a)(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=11;break}if(r={id:n.parentdata.id,type:2,reason:e},"column"!==n.types){a.next=7;break}return a.next=5,Object(s.d)(r).then((function(t){200===t.code&&(n.$message.success("举报成功!"),n.$set(n.itemData,"report_status",!0))})).catch((function(t){n.$message.error(t.msg)}));case 5:a.next=9;break;case 7:return a.next=9,Object(s.w)(r).then((function(t){200===t.code&&(n.$message.success("举报成功!"),n.$set(n.itemData,"report_status",!0))})).catch((function(t){n.$message.error(t.msg)}));case 9:a.next=12;break;case 11:n.$message.success("您已举报过该评论，请勿重复操作!");case 12:case"end":return a.stop()}}),a)})))()},anwserCommentAction:function(t){var e=this,n=t;n.parent=this.parentId,"column"===this.types?(n.column_id=this.columnid,Object(d.e)(n).then((function(t){200===t.code&&("child"===e.anwserChat?(e.$message.success("恭喜，回复成功~"),e.parentdata.child.push(t.data)):(e.$message.success("恭喜，发布成功~"),e.parentdata.child.push(t.data)),e.$refs.childInput.cancel(),e.$emit("changeCommentCount",1),e.anwserChat="",e.parentId="0",e.inputRegion=!1,e.responseName="")})).catch((function(t){422===t.code?(e.$parent.modalTipText=t.msg,e.$parent.tipVisible=!0):e.$message.error(t.msg)}))):(n.post_id=this.articalId,Object(s.y)(n).then((function(t){200===t.code&&("child"===e.anwserChat?(e.$message.success("恭喜，回复成功~"),e.parentdata.child.unshift(t.data)):(e.$message.success("恭喜，发布成功~"),e.parentdata.child.push(t.data)),e.$emit("changeCommentCount",1),e.$refs.childInput.cancel(),e.anwserChat="",e.parentId="0",e.inputRegion=!1,e.responseName="")})).catch((function(t){422===t.code?(e.$parent.modalTipText=t.msg,e.$parent.tipVisible=!0):e.$message.error(t.msg)})))}}},f=(n(1252),Object(c.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-container"},[a("div",{staticClass:"comment-item"},[a("div",{staticClass:"avatar"},[a("div",{staticClass:"img",style:{cursor:t.itemData.is_wb||t.itemData.is_anonymous?"initial":""},on:{click:function(e){return t.jumpToPersonal(t.parentdata.user_url)}}},[a("img",{staticStyle:{color:"#fff"},attrs:{src:t.itemData.user_pic,alt:t.parentdata.username}})])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content-wraper",on:{mouseenter:function(e){return e.stopPropagation(),e.preventDefault(),t.showReport(!0)},mouseleave:function(e){return e.stopPropagation(),e.preventDefault(),t.showReport(!1)}}},[a("div",{staticClass:"user-info"},[a("span",{staticClass:"name",style:{cursor:t.itemData.is_wb||t.itemData.is_anonymous?"initial":""},on:{click:function(e){return t.jumpToPersonal(t.parentdata.user_url)}}},[t._v(t._s(t.itemData.nickname))]),t._v(" "),t.authorName==t.itemData.username&&"column"!==t.types?a("span",{staticClass:"is_author"},[t._v("作者")]):t._e(),t._v(" "),t.itemData.vip?a("span",{staticClass:"is-vip"},[a("img",{attrs:{src:n(589)}})]):t._e(),t._v(" "),t.itemData.user_level>0&&"0"!==t.itemData.user_id?a("span",{staticClass:"level"},[t._v("LV."+t._s(t.itemData.user_level))]):t._e(),t._v(" "),t.itemData.is_wb?[a("a",{staticClass:"weibo-tag",attrs:{href:"https://www.weibo.com/freebuf",target:"_blank"}},[t._v("来自"),a("span",[t._v("新浪微博")]),t._v(" "),a("svg-icon",{staticStyle:{"font-size":"15px","margin-left":"3px"},attrs:{"icon-class":"weibo_logo"}})],1)]:[t.itemData.desc.length>0?a("span",{staticClass:"tag"},[a("i",[t._v("(")]),a("b",[t._v(t._s(t.itemData.desc))]),a("i",[t._v(")")])]):t._e()]],2),t._v(" "),a("div",{staticClass:"context"},[a("span",{staticClass:"comment-txt",style:{color:"spam"===t.parentdata.approved?"rgba(0,0,0,.25)":""},domProps:{innerHTML:t._s(t.parentdata.content)}}),t._v(" "),a("span",{staticStyle:{fontStyle:"italic"}},[t._v(t._s(0==t.parentdata.approved?"（ 评论审核中，通过后自动发布~ ）":""))])]),t._v(" "),a("div",{staticClass:"comment-status"},[a("span",{staticClass:"date"},[t._v(t._s(t.itemData.date))]),t._v(" "),1==t.parentdata.approved?a("span",{staticClass:"interaction"},["admin"==t.userInfoData.role&&t.isShowReport?a("span",{staticClass:"admin-handler"},[a("span",{staticClass:"edit",on:{click:function(e){return t.editComment(t.itemData)}}},[a("a-icon",{attrs:{type:"edit"}}),t._v("编辑")],1),t._v(" "),a("span",{staticClass:"sign",on:{click:function(e){return t.signComment(t.itemData)}}},[a("a-icon",{attrs:{type:"dislike"}}),t._v("标为垃圾")],1),t._v(" "),a("span",{staticClass:"delete",on:{click:function(e){return t.deleteComment(t.itemData)}}},[a("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)]):t._e(),t._v(" "),t.itemData.report_status?[a("a",{directives:[{name:"show",rawName:"v-show",value:t.isShowReport,expression:"isShowReport"}],staticClass:"ant-dropdown-link reported"},[a("a-icon",{attrs:{type:"info-circle"}}),t._v("已举报\n              ")],1)]:[a("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.isShowReport||t.dropdownStatus,expression:"isShowReport || dropdownStatus"}],on:{visibleChange:t.onvisibleChange}},[a("a",{staticClass:"ant-dropdown-link",class:t.itemData.report_status?"reported":"",on:{click:function(t){return t.preventDefault()}}},[a("a-icon",{attrs:{type:"info-circle"}}),t._v(t._s(t.itemData.report_status?"已举报":"举报")+"\n                ")],1),t._v(" "),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},t._l(t.reportInfo,(function(e){return a("a-menu-item",{key:e,on:{click:function(n){return t.onReportClick(t.itemData.report_status,e)}}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)],1)],t._v(" "),a("span",{staticClass:"approve",class:t.itemData.like_status?"approved":"",on:{click:function(e){return t.approveAction(t.itemData)}}},[a("a-icon",{attrs:{type:"like"}}),t._v(t._s(t.itemData.agree>0?t.itemData.agree:"  "))],1),t._v(" "),a("span",{staticClass:"anwser",on:{click:function(e){return t.anwserAction(t.itemData)}}},[a("a-icon",{attrs:{type:"message"}}),t._v("回复")],1)],2):t._e()])]),t._v(" "),a("div",{staticClass:"anwser-panel"},[!t.isExpand&&t.itemData.child.length>0?t._l(t.itemData.child.slice(0,t.limitNum),(function(e){return a("child-item",{key:e.id,attrs:{types:t.types,authorname:t.postauthorname,itemdata:e}})})):t._l(t.itemData.child,(function(e){return a("child-item",{key:e.id,attrs:{types:t.types,authorname:t.postauthorname,itemdata:e}})})),t._v(" "),t.itemData.child.length>t.limitNum?a("div",{staticClass:"comment-num"},[t._v("\n          共"+t._s(t.itemData.child.length)+"条回复，\n          "),t.itemData.child.length>t.limitNum?a("span",[t.isFocus?t._e():a("span",{on:{click:function(e){return t.lookMore(t.itemData)}}},[t._v("点击查看")]),t._v(" "),t.isExpand&&t.isFocus?a("span",{on:{click:function(e){return t.lookMore(t.itemData)}}},[t._v("收起")]):t._e(),t._v(" "),!t.isExpand&&t.isFocus?a("span",{on:{click:function(e){return t.lookMore(t.itemData)}}},[t._v("展开")]):t._e()]):t._e()]):t._e()],2)])]),t._v(" "),t.inputRegion?a("InputItem",{ref:"childInput",attrs:{type:1,propdata:t.itemData,nickname:t.responseName},on:{triggerAnwser:t.anwserCommentAction}}):t._e()],1)}),[],!1,null,"121fd1cf",null));e.a=f.exports},1250:function(t,e,n){"use strict";var a=n(1158);n.n(a).a},1251:function(t,e,n){"use strict";var a=n(1159);n.n(a).a},1252:function(t,e,n){"use strict";var a=n(1160);n.n(a).a}}]);